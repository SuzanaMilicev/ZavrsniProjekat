<div class="container mx-auto shopping-cart">
    <span>
        <div *ngIf="cartProducts.length; else elseBlock">
            <div class="row">
                <div class="col-12">
                    <table class="table">
                        <tbody>
                            <tr *ngFor="let product of cartProducts">
                                <td class="col-3"><img [src]="product.imgSrc" class="img-fluid me-2 mb-3 product-image"
                                        alt="cart product flowers"></td>
                                <td class="col-3"> {{product.name}} <br><br>
                                    <button type="button" class="btn btn-link removeBtn border"
                                        (click)="remove(product)">Remove</button>
                                </td>
                                <td class="col-2">{{product.price}}<span>$</span></td>
                                <td class="col-2"><input type="number" class="quantityInput" [value]="product.quantity"
                                        (change)="quantityChanged(product, quantity.value)" #quantity min="1" max="100">
                                </td>
                                <td class="col-2">{{ +product.price * +quantity.value}}<span>$</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row justify-content-end">
                <div class="col-10 col-md-12 text-end">
                    <p>Subtotal: <span>{{subtotal}}<span>$</span></span> </p>
                    <p class="border-bottom mb-1" #shipping> Shipping:
                        <span class="mb-2">
                            <div class="d-inline" *ngIf="subtotal >= 100; else elseBlock">FREE</div>
                            <ng-template #elseBlock>100<span>$</span>
                            </ng-template>
                        </span>
                    </p>
                    <p>Total: <span>
                            <div  class="d-inline" *ngIf="subtotal >= 100; else total">{{subtotal}}<span>$</span></div>
                            <ng-template #total>{{subtotal + 100}}<span>$</span>
                            </ng-template>
                        </span>
                    </p>
                </div>
                <div class="col-10 col-md-12">
                    <button class="btn btn-dark mb-5 float-end" (click)="checkout()">Checkout</button>
                </div>
            </div>
        </div>
        <ng-template #elseBlock>
            <h1 class="text-center">Shopping Cart is empty.</h1>
        </ng-template>
    </span>
</div>


































<!-- <div class="container shopping-cart">
    <div class="row">
        <div class="col-12">
            <table mat-table [dataSource]="dataSource">
                <ng-container matColumnDef="imgSrc">
                    <th mat-header-cell *matHeaderCellDef>Image</th>
                    <td mat-cell *matCellDef="let row"> {{row.imgSrc}} </td>
                </ng-container>
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef>Name</th>
                    <td mat-cell *matCellDef="let row"> {{row.name}} </td>
                </ng-container>
                <ng-container matColumnDef="remove">
                    <th mat-header-cell *matHeaderCellDef>Remove</th>
                    <td mat-cell *matCellDef="let row">
                        <button class="btn btn-danger" (click)="removeMaterialTable(row)">Remove</button>
                    </td>
                </ng-container>
                <ng-container matColumnDef="price">
                    <th mat-header-cell *matHeaderCellDef>Price</th>
                    <td mat-cell *matCellDef="let row" #price> {{row.price}} </td>
                </ng-container>
                <ng-container matColumnDef="quantity">
                    <th mat-header-cell *matHeaderCellDef>Quantity</th>
                    <td mat-cell *matCellDef="let row; let i = index">
                        <input type="number" [(ngModel)]="quantityValue" class="form-control" [value]="row.quantity"
                            #quantity (change)="quantityChangedMaterialTable(row, quantity.value)">
                    </td>
                </ng-container>
                <ng-container matColumnDef="finalPrice">
                    <th mat-header-cell *matHeaderCellDef>FinalPrice</th>
                    <td mat-cell *matCellDef="let row; columns: displayedColumns;" #multiplicationResult> {{ multiplicationResult }} </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row"></tr>

                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="5">Shopping Cart is empty.</td>
                </tr>
            </table>
            <div class="col-5 d-flex justify-content-end">
                <p>Subtotal: {{subtotal}}</p>
                <p #shipping>Shipping:
                <div *ngIf=" subtotal >= 100; else elseBlock">FREE</div>
                <ng-template #elseBlock>100</ng-template>$ 
                <hr>
                <p>Total: {{total}}</p>
            </div>
            <div>
                <button class="btn btn-dark mb-5 float-end" (click)="checkout()">Checkout</button>
            </div>
        </div>
    </div>
</div> -->